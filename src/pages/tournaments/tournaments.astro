---
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import InterstitialAd from "../../components/InterstitialAd.astro";

const standard = adList.standard1.concat(
    adList.standard2,
    adList.standard3,
    adList.standard4,
    adList.standard5,
    adList.standard6,
    adList.standard7,
    adList.standard8,
);
const randomAd = standard[Math.floor(Math.random() * standard.length)];
const randomAd2 = standard[Math.floor(Math.random() * standard.length)];

import adList from "../../assets/adList.json";
import "../../styles/header_footer.css";
import "../../styles/tournaments.css";
---

<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="沖縄でポーカーができるアミューズメント店舗やトーナメント情報を毎日更新。初心者や旅行者にも安心のポータルサイトOKIPOKA。"
        />
        <title>本日のトーナメント情報 | OKIPOKA</title>
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    </head>

    <body>
        <Header />
        <InterstitialAd />

        <main>
            <div
                class="standard-ad-wrapper"
                style="text-align: center; margin: 1.5rem 0;"
            >
                <a
                    href={randomAd.link}
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <img
                        src={randomAd.image}
                        alt="スポンサー広告"
                        style="max-width: 650px; width: 100%; height: auto;"
                    />
                </a>
            </div>

            <section class="tournament-info">
                <h2>トーナメント情報</h2><br />
                <div style="text-align: center; margin-bottom: 1rem;">
                    <label
                        for="datePicker"
                        style="font-weight: bold; margin-right: 0.5em;"
                        >表示日：</label
                    >
                    <input
                        type="date"
                        id="datePicker"
                        style="padding: 0.3em; font-size: 0.9rem;"
                    />
                </div>
                <p
                    id="today-date"
                    style="text-align: center; color: #666; font-size: 0.9rem;"
                >
                </p>
                <p>
                    沖縄県内で開催予定のトーナメント情報を店舗別に掲載しています。掲載内容は各店舗からの提供情報をもとにしており、詳細については店舗によって異なる場合があります。ご不明な点や気になる点がありましたら、各店舗までお気軽にお問い合わせください。
                </p>

                <div id="tournament-list"></div>
            </section>

            <div
                class="standard-ad-wrapper"
                style="text-align: center; margin: 1.5rem 0;"
            >
                <a
                    href={randomAd2.link}
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <img
                        src={randomAd2.image}
                        alt="スポンサー広告"
                        style="max-width: 650px; width: 100%; height: auto;"
                    />
                </a>
            </div>
        </main>

        <Footer />

        <script src="/js/tournaments.js" type="module"></script>
        <script src="/js/header.js" type="module"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const now = new Date();
                const offset = now.getTimezoneOffset();
                const jstDate = new Date(now.getTime() - offset * 60 * 1000);
                const formatted = jstDate.toISOString().slice(0, 10);
                // @ts-ignore
                document.getElementById("today-date").textContent =
                    `本日：${formatted}`;
            });
        </script>
    </body>
</html>
