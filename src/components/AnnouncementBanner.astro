---
// ãŠçŸ¥ã‚‰ã›ã®è¨­å®š - ã“ã“ã§ãŠçŸ¥ã‚‰ã›ã®ON/OFFã¨å†…å®¹ã‚’ç®¡ç†
const announcements = [
  {
    id: 'j9-championship-countdown',
    type: 'countdown',
    active: true, // ã“ã®ãŠçŸ¥ã‚‰ã›ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã©ã†ã‹
    title: 'ï¿½ J9 CHAMPIONSHIP',
    subtitle: 'ã¤ã„ã«é–‹å‚¬ï¼æ²–ç¸„æœ€é«˜å³°ã®ãƒãƒ¼ã‚«ãƒ¼ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆ',
    targetDate: '2025-10-12T12:00:00+09:00', // 10/12(æ—¥) 12:00é–‹å§‹
    description: 'ç†±æˆ¦ãŒä»Šé€±æœ«ã«è¿«ã‚‹ï¼å‚åŠ è€…å‹Ÿé›†ä¸­',
    buttonText: 'è©³ç´°ãƒ»ã‚¨ãƒ³ãƒˆãƒªãƒ¼',
    buttonUrl: 'https://www.okipoka.com/tournaments/2H4HTy5InU4kJ8KeyZeW',
    backgroundImage: '/images/osirase/j9championship.jpg',
    bgColor: 'rgba(0, 0, 0, 0.6)', // ç”»åƒã®ä¸Šã«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
    textColor: '#ffffff'
  },
  // ä»–ã®ãŠçŸ¥ã‚‰ã›ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½
  // {
  //   id: 'job-recruitment',
  //   type: 'general',
  //   active: false,
  //   title: 'ğŸš€ ã‚¹ã‚¿ãƒƒãƒ•å‹Ÿé›†ä¸­',
  //   subtitle: 'ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆæ–½è¨­ã§ä¸€ç·’ã«åƒãã¾ã›ã‚“ã‹ï¼Ÿ',
  //   description: 'æœªçµŒé¨“æ­“è¿ï¼ãƒãƒ¼ã‚«ãƒ¼å¥½ãå¤§æ­“è¿ï¼',
  //   buttonText: 'æ±‚äººè©³ç´°',
  //   buttonUrl: '/jobs/staff-2025',
  //   bgColor: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)',
  //   textColor: '#ffffff'
  // }
];

// ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãŠçŸ¥ã‚‰ã›ã®ã¿ã‚’æŠ½å‡º
const activeAnnouncements = announcements.filter(announcement => announcement.active);
---

{activeAnnouncements.length > 0 && (
  <section class="announcements-wrapper">
    {activeAnnouncements.map((announcement) => (
      <a 
        href={announcement.buttonUrl || '#'}
        class={`announcement-banner ${announcement.type} ${announcement.backgroundImage ? 'with-image' : ''}`}
        style={`
          ${announcement.backgroundImage ? 
            `background: url('${announcement.backgroundImage}'); background-size: cover; background-position: center;` : 
            `background: ${announcement.bgColor};`
          } 
          color: ${announcement.textColor};
        `}
      >
        {announcement.backgroundImage && (
          <div class="image-overlay"></div>
        )}
        <div class="announcement-content">
          {announcement.type === 'countdown' && (
            <div class="countdown-badge" data-target={announcement.targetDate}>
              <span class="countdown-text">
                <span class="countdown-label">é–‹å‚¬ã¾ã§</span>
                <span class="days">--</span>
                <span class="day-label">æ—¥</span>
              </span>
            </div>
          )}
        </div>
      </a>
    ))}
  </section>
)}

<style>
  .announcements-wrapper {
    max-width: 900px;
    margin: 2rem auto;
    padding: 0 1rem;
  }

  .announcement-banner {
    border-radius: 16px;
    padding: 0;
    margin-bottom: 1.5rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    position: relative;
    overflow: hidden;
    width: 400px;
    height: 400px;
    margin-left: auto;
    margin-right: auto;
    display: block;
    text-decoration: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .announcement-banner:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
  }

  /* ç”»åƒã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ - ç”»åƒã‚’éš ã•ãšã«ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿ã‚„ã™ãã™ã‚‹ */
  .image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.2) 30%,
      rgba(0, 0, 0, 0.1) 60%,
      rgba(0, 0, 0, 0.3) 100%
    );
    pointer-events: none;
  }

  /* ç”»åƒãŒãªã„å ´åˆã®è»½ã„ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
  .announcement-banner:not(.with-image)::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    pointer-events: none;
  }

  .announcement-content {
    position: relative;
    z-index: 2;
    width: 100%;
    height: 100%;
  }

  .countdown-badge {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    background: rgba(0, 0, 0, 0.8);
    color: #ffffff;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 700;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    z-index: 3;
  }

  .countdown-text {
    display: flex;
    align-items: center;
    gap: 0.2rem;
  }

  .countdown-text .days {
    font-size: 1.1rem;
    font-weight: 900;
    color: #ff6b35;
  }

  .countdown-label,
  .day-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: #ffffff;
  }

  /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
  @media (max-width: 768px) {
    .announcements-wrapper {
      margin: 1rem auto;
      padding: 0 0.75rem;
    }

    .announcement-banner {
      width: 320px;
      height: 320px;
      margin-bottom: 1rem;
    }

    .countdown-badge {
      bottom: 0.8rem;
      right: 0.8rem;
      font-size: 0.8rem;
      padding: 0.4rem 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .announcement-banner {
      width: 280px;
      height: 280px;
    }

    .countdown-badge {
      bottom: 0.6rem;
      right: 0.6rem;
      font-size: 0.75rem;
      padding: 0.3rem 0.6rem;
    }

    .countdown-text .days {
      font-size: 1rem;
    }
  }
</style>

<script is:inline>
  // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã¨æœ¬æ—¥é–‹å‚¬è¡¨ç¤ºã®å®Ÿè£…
  function initCountdownBadges() {
    const countdownElements = document.querySelectorAll('.countdown-badge[data-target]');
    
    countdownElements.forEach(element => {
      const targetDate = new Date(element.dataset.target);
      const today = new Date();
      
      // æ—¥ä»˜ã®ã¿ã§æ¯”è¼ƒã™ã‚‹ãŸã‚æ™‚åˆ»ã‚’ãƒªã‚»ãƒƒãƒˆ
      const targetDateOnly = new Date(targetDate.getFullYear(), targetDate.getMonth(), targetDate.getDate());
      const todayOnly = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      
      function updateCountdown() {
        const timeDiff = targetDateOnly.getTime() - todayOnly.getTime();
        const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
        
        const countdownLabel = element.querySelector('.countdown-label');
        const daysElement = element.querySelector('.days');
        const dayLabel = element.querySelector('.day-label');
        
        if (daysDiff < 0) {
          // éããŸå ´åˆ
          countdownLabel.textContent = 'çµ‚äº†';
          daysElement.textContent = '';
          dayLabel.textContent = '';
        } else if (daysDiff === 0) {
          // å½“æ—¥ã®å ´åˆ
          countdownLabel.textContent = 'æœ¬æ—¥';
          daysElement.textContent = 'é–‹å‚¬';
          dayLabel.textContent = '';
          daysElement.style.color = '#00ff00'; // ç·‘è‰²ã§å¼·èª¿
        } else {
          // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ä¸­
          countdownLabel.textContent = 'é–‹å‚¬ã¾ã§';
          daysElement.textContent = daysDiff.toString();
          dayLabel.textContent = 'æ—¥';
          daysElement.style.color = '#ff6b35'; // å…ƒã®è‰²
        }
      }
      
      // åˆå›å®Ÿè¡Œ
      updateCountdown();
      
      // 1æ™‚é–“ã”ã¨ã«æ›´æ–°ï¼ˆå½“æ—¥åˆ¤å®šã®ãŸã‚ï¼‰
      setInterval(updateCountdown, 1000 * 60 * 60);
    });
  }
  
  // DOMContentLoadedã¾ãŸã¯ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCountdownBadges);
  } else {
    initCountdownBadges();
  }
</script>